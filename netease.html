<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½‘æ˜“äº‘éŸ³ä¹ - æ­£å¼ç‰ˆ</title>
    
    <!-- æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- ç½‘ç«™å›¾æ ‡ -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸµ</text></svg>">
    
    <style>
        /* å…¨å±€æ ·å¼ */
        :root {
            --primary-color: #e60026;
            --secondary-color: #ff2d55;
            --bg-dark: #121212;
            --bg-card: #1e1e1e;
            --bg-hover: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --border-color: #404040;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* å¯¼èˆªæ æ ·å¼ */
        .navbar {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
        }
        
        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-link:hover, .nav-link.active {
            color: var(--primary-color);
        }
        
        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .main-content {
            padding: 2rem 0;
            animation: fadeIn 0.5s ease;
        }
        
        .page-title {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .page-title h1 {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }
        
        .page-title p {
            color: var(--text-secondary);
            font-size: 1.2rem;
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .glass {
            background: rgba(30, 30, 30, 0.8);
            border-radius: 20px;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
        }
        
        .card {
            padding: 2rem;
            margin-bottom: 2rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(230, 0, 38, 0.2);
        }
        
        /* ç½‘æ ¼å¸ƒå±€ */
        .grid {
            display: grid;
            gap: 2rem;
        }
        
        .grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }
        
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }
        
        /* æ’­æ”¾å™¨æ ·å¼ */
        .music-player-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .player-section {
            background: linear-gradient(135deg, rgba(30, 30, 30, 0.9), rgba(40, 40, 40, 0.9));
            border-radius: 25px;
            overflow: hidden;
            border: 1px solid rgba(64, 64, 64, 0.5);
        }
        
        .player-header {
            background: rgba(230, 0, 38, 0.1);
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .player-header h3 {
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary-color);
        }
        
        .player-main {
            padding: 2rem;
        }
        
        .player-info {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .album-art {
            width: 200px;
            height: 200px;
            border-radius: 15px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.1);
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            flex-shrink: 0;
        }
        
        .album-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .album-art:hover img {
            transform: scale(1.05);
        }
        
        .album-art.default {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: var(--primary-color);
        }
        
        .track-info {
            flex: 1;
        }
        
        .track-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }
        
        .track-artist {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        
        .track-meta {
            display: flex;
            gap: 2rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* è¿›åº¦æ¡ */
        .progress-container {
            margin: 2rem 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin: 1rem 0;
            overflow: hidden;
            cursor: pointer;
        }
        
        .progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 3px;
            transition: width 0.1s linear;
        }
        
        .time-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* æ§åˆ¶æŒ‰é’® */
        .player-controls {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .control-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            margin-bottom: 1rem;
        }
        
        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            transform: scale(1.05);
            background: rgba(230, 0, 38, 0.2);
        }
        
        .play-btn {
            width: 70px;
            height: 70px;
            font-size: 1.8rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
        }
        
        .play-btn:hover {
            box-shadow: 0 0 30px rgba(230, 0, 38, 0.3);
        }
        
        /* éŸ³é‡æ§åˆ¶ */
        .volume-control {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .volume-slider {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            cursor: pointer;
            background: var(--primary-color);
        }
        
        /* åŠŸèƒ½åŒºåŸŸ */
        .function-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .function-card {
            padding: 1.5rem;
        }
        
        .function-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
        }
        
        .function-header h3 {
            font-size: 1.3rem;
        }
        
        /* è¾“å…¥æ¡†æ ·å¼ */
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        .input-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .input-field {
            width: 100%;
            padding: 0.8rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: inherit;
            transition: all 0.3s;
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(230, 0, 38, 0.1);
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-family: inherit;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(230, 0, 38, 0.3);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        
        /* æ­Œæ›²åˆ—è¡¨ */
        .song-list {
            margin-top: 1rem;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .song-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.02);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .song-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--border-color);
            transform: translateX(5px);
        }
        
        .song-item.active {
            background: rgba(230, 0, 38, 0.1);
            border-color: var(--primary-color);
        }
        
        .song-cover {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            overflow: hidden;
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .song-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .song-info {
            flex: 1;
            min-width: 0;
        }
        
        .song-title {
            font-weight: 600;
            margin-bottom: 0.2rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .song-artist {
            font-size: 0.9rem;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .song-duration {
            font-size: 0.9rem;
            color: var(--text-secondary);
            flex-shrink: 0;
        }
        
        /* çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 0.3rem 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            font-size: 0.8rem;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .status-online {
            background: #28a745;
            box-shadow: 0 0 10px rgba(40, 167, 69, 0.5);
        }
        
        .status-offline {
            background: #dc3545;
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-slide-up {
            animation: slideInUp 0.5s ease forwards;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            
            .nav-links {
                width: 100%;
                justify-content: center;
            }
            
            .page-title h1 {
                font-size: 2rem;
            }
            
            .player-info {
                flex-direction: column;
                text-align: center;
            }
            
            .album-art {
                width: 150px;
                height: 150px;
            }
            
            .control-buttons {
                gap: 1rem;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
        
        /* å·¥å…·æç¤º */
        .tooltip {
            position: relative;
            cursor: help;
        }
        
        .tooltip-text {
            visibility: hidden;
            width: 200px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            text-align: center;
            padding: 10px;
            border-radius: 6px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            line-height: 1.4;
            pointer-events: none;
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* é¡µè„š */
        .footer {
            text-align: center;
            padding: 2rem 0;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-color);
            margin-top: 3rem;
        }
        
        .footer p {
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="container nav-container">
            <a href="#" class="logo">
                <i class="fas fa-music"></i>
                ç½‘æ˜“äº‘éŸ³ä¹
            </a>
            <div class="nav-links">
                <a href="#" class="nav-link active">
                    <i class="fas fa-home"></i> é¦–é¡µ
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-search"></i> å‘ç°
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-heart"></i> æˆ‘çš„éŸ³ä¹
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-user"></i> æˆ‘çš„
                </a>
            </div>
            <div class="status-indicator">
                <span class="status-dot status-online"></span>
                <span id="apiStatus">APIæ­£å¸¸</span>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹ -->
    <main class="main-content">
        <div class="container">
            <!-- é¡µé¢æ ‡é¢˜ -->
            <div class="page-title animate-slide-up">
                <h1>ğŸµ å‘ç°å¥½éŸ³ä¹</h1>
                <p>åƒä¸‡æ›²åº“ï¼Œéšæ—¶éšåœ°ï¼Œå‘ç°éŸ³ä¹ä¹‹ç¾</p>
            </div>

            <!-- éŸ³ä¹æ’­æ”¾å™¨ -->
            <div class="music-player-container animate-slide-up" style="animation-delay: 0.1s">
                <div class="player-section glass">
                    <div class="player-header">
                        <h3><i class="fas fa-play-circle"></i> æ­£åœ¨æ’­æ”¾</h3>
                    </div>
                    <div class="player-main">
                        <div class="player-info">
                            <div class="album-art default" id="albumArt">
                                <i class="fas fa-music"></i>
                            </div>
                            <div class="track-info">
                                <h2 class="track-title" id="trackTitle">é€‰æ‹©ä¸€é¦–æ­Œæ›²å¼€å§‹æ’­æ”¾</h2>
                                <p class="track-artist" id="trackArtist">-</p>
                                <div class="track-meta">
                                    <span id="trackAlbum">ä¸“è¾‘ï¼š-</span>
                                    <span id="trackDuration">æ—¶é•¿ï¼š-</span>
                                    <span id="trackQuality">éŸ³è´¨ï¼š-</span>
                                </div>
                                
                                <div class="progress-container">
                                    <div class="time-info">
                                        <span id="currentTime">0:00</span>
                                        <span id="totalTime">0:00</span>
                                    </div>
                                    <div class="progress-bar" id="progressBar">
                                        <div class="progress" id="progress"></div>
                                    </div>
                                </div>
                                
                                <div class="player-controls">
                                    <div class="control-buttons">
                                        <button class="control-btn" id="prevBtn" title="ä¸Šä¸€é¦–">
                                            <i class="fas fa-step-backward"></i>
                                        </button>
                                        <button class="control-btn play-btn" id="playBtn" title="æ’­æ”¾/æš‚åœ">
                                            <i class="fas fa-play" id="playIcon"></i>
                                        </button>
                                        <button class="control-btn" id="nextBtn" title="ä¸‹ä¸€é¦–">
                                            <i class="fas fa-step-forward"></i>
                                        </button>
                                        <button class="control-btn" id="likeBtn" title="å–œæ¬¢">
                                            <i class="far fa-heart"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="volume-control">
                                        <i class="fas fa-volume-up" style="color: var(--primary-color);"></i>
                                        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50">
                                        <span id="volumePercent" style="color: var(--text-secondary);">50%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- åŠŸèƒ½åŒºåŸŸ -->
            <div class="function-grid animate-slide-up" style="animation-delay: 0.2s">
                <!-- æœç´¢åŠŸèƒ½ -->
                <div class="function-card glass">
                    <div class="function-header">
                        <i class="fas fa-search"></i>
                        <h3>æœç´¢éŸ³ä¹</h3>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">å…³é”®è¯</label>
                        <input type="text" class="input-field" id="searchInput" placeholder="è¾“å…¥æ­Œæ›²åã€æ­Œæ‰‹æˆ–ä¸“è¾‘">
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="searchMusic()">
                            <i class="fas fa-search"></i> æœç´¢éŸ³ä¹
                        </button>
                        <button class="btn btn-secondary" onclick="getRecommendations()">
                            <i class="fas fa-fire"></i> çƒ­é—¨æ¨è
                        </button>
                    </div>
                    
                    <div class="song-list" id="searchResults" style="display: none;">
                        <h4 style="margin-bottom: 1rem; color: var(--primary-color);">æœç´¢ç»“æœ</h4>
                        <!-- æœç´¢ç»“æœå°†åŠ¨æ€æ’å…¥ -->
                    </div>
                </div>
                
                <!-- æ¨èåŠŸèƒ½ -->
                <div class="function-card glass">
                    <div class="function-header">
                        <i class="fas fa-star"></i>
                        <h3>æ¯æ—¥æ¨è</h3>
                    </div>
                    
                    <div class="song-list" id="recommendations">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="getPersonalized()">
                            <i class="fas fa-user-check"></i> ä¸ªæ€§åŒ–æ¨è
                        </button>
                        <button class="btn btn-secondary" onclick="getTopList()">
                            <i class="fas fa-chart-line"></i> æ’è¡Œæ¦œ
                        </button>
                    </div>
                </div>
            </div>

            <!-- ç™»å½•çŠ¶æ€ -->
            <div class="function-card glass animate-slide-up" style="animation-delay: 0.3s">
                <div class="function-header">
                    <i class="fas fa-user-circle"></i>
                    <h3>è´¦æˆ·çŠ¶æ€</h3>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin: 1.5rem 0;">
                    <div class="status-card">
                        <h4 style="color: var(--text-secondary); margin-bottom: 0.5rem;">ç™»å½•çŠ¶æ€</h4>
                        <div id="loginStatus" style="color: #dc3545; font-weight: 600;">æœªç™»å½•</div>
                    </div>
                    <div class="status-card">
                        <h4 style="color: var(--text-secondary); margin-bottom: 0.5rem;">éŸ³è´¨æƒé™</h4>
                        <div id="qualityStatus" style="color: #ffc107; font-weight: 600;">æ ‡å‡†éŸ³è´¨</div>
                    </div>
                    <div class="status-card">
                        <h4 style="color: var(--text-secondary); margin-bottom: 0.5rem;">APIçŠ¶æ€</h4>
                        <div id="apiStatus" style="color: #28a745; font-weight: 600;">æ­£å¸¸</div>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showLoginModal()">
                        <i class="fas fa-sign-in-alt"></i> ç«‹å³ç™»å½•
                    </button>
                    <button class="btn btn-secondary" onclick="checkLoginStatus()">
                        <i class="fas fa-sync-alt"></i> åˆ·æ–°çŠ¶æ€
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <p>ç½‘æ˜“äº‘éŸ³ä¹æ­£å¼ç‰ˆ &copy; 2024 ç½‘æ˜“å…¬å¸ ç‰ˆæƒæ‰€æœ‰</p>
            <p style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.5);">
                æœ¬äº§å“ä»…ç”¨äºå­¦ä¹ äº¤æµï¼Œè¯·æ”¯æŒæ­£ç‰ˆéŸ³ä¹
            </p>
        </div>
    </footer>

    <!-- ç™»å½•æ¨¡æ€æ¡† -->
    <div id="loginModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); z-index: 2000; align-items: center; justify-content: center;">
        <div class="glass card" style="max-width: 400px; padding: 2rem;">
            <h3 style="color: var(--primary-color); margin-bottom: 1.5rem;">ç™»å½•ç½‘æ˜“äº‘éŸ³ä¹</h3>
            
            <div class="input-group">
                <label class="input-label">æ‰‹æœºå·/é‚®ç®±</label>
                <input type="text" class="input-field" id="loginAccount" placeholder="è¯·è¾“å…¥æ‰‹æœºå·æˆ–é‚®ç®±">
            </div>
            
            <div class="input-group">
                <label class="input-label">å¯†ç </label>
                <input type="password" class="input-field" id="loginPassword" placeholder="è¯·è¾“å…¥å¯†ç ">
            </div>
            
            <div class="btn-group" style="margin-top: 2rem;">
                <button class="btn btn-primary" onclick="handleLogin()">
                    <i class="fas fa-sign-in-alt"></i> ç™»å½•
                </button>
                <button class="btn btn-secondary" onclick="hideLoginModal()">
                    <i class="fas fa-times"></i> å–æ¶ˆ
                </button>
            </div>
            
            <div style="margin-top: 1.5rem; text-align: center; color: var(--text-secondary);">
                <p>æˆ–ä½¿ç”¨äºŒç»´ç ç™»å½•</p>
                <button class="btn btn-secondary" onclick="startQRLogin()" style="margin-top: 0.5rem;">
                    <i class="fas fa-qrcode"></i> äºŒç»´ç ç™»å½•
                </button>
            </div>
        </div>
    </div>

    <!-- è„šæœ¬ -->
    <script>
        // å…¨å±€å˜é‡
        let API_BASE = 'https://neteaseapi-enhanced.vercel.app';
        let currentAudio = null;
        let currentTrackIndex = 0;
        let isPlaying = false;
        let currentPlaylist = [];
        let userCookie = null;
        let currentSongData = null;

        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ç½‘æ˜“äº‘éŸ³ä¹æ­£å¼ç‰ˆå·²åŠ è½½');
            
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è®¾ç½®
            loadSettings();
            
            // åˆå§‹åŒ–æ’­æ”¾å™¨
            initPlayer();
            
            // åŠ è½½æ¨èéŸ³ä¹
            getRecommendations();
            
            // æ£€æŸ¥APIçŠ¶æ€
            checkAPIStatus();
            
            // æ›´æ–°ç™»å½•çŠ¶æ€
            updateLoginStatus();
        });

        // åˆå§‹åŒ–æ’­æ”¾å™¨
        function initPlayer() {
            const audio = new Audio();
            currentAudio = audio;
            
            // DOMå…ƒç´ 
            const playBtn = document.getElementById('playBtn');
            const playIcon = document.getElementById('playIcon');
            const progress = document.getElementById('progress');
            const progressBar = document.getElementById('progressBar');
            const volumeSlider = document.getElementById('volumeSlider');
            
            // æ’­æ”¾/æš‚åœ
            playBtn.addEventListener('click', togglePlay);
            
            // éŸ³é‡æ§åˆ¶
            volumeSlider.addEventListener('input', function() {
                audio.volume = this.value / 100;
                document.getElementById('volumePercent').textContent = this.value + '%';
            });
            
            // è¿›åº¦æ¡æ§åˆ¶
            progressBar.addEventListener('click', function(e) {
                if (!audio.duration) return;
                const percent = e.offsetX / this.clientWidth;
                audio.currentTime = percent * audio.duration;
            });
            
            // éŸ³é¢‘äº‹ä»¶ç›‘å¬
            audio.addEventListener('timeupdate', updateProgress);
            audio.addEventListener('loadedmetadata', function() {
                document.getElementById('totalTime').textContent = formatTime(audio.duration);
            });
            audio.addEventListener('ended', function() {
                isPlaying = false;
                playIcon.className = 'fas fa-play';
                // æ’­æ”¾ä¸‹ä¸€é¦–
                setTimeout(() => {
                    playNext();
                }, 1000);
            });
            
            // ä¸Šä¸€é¦–/ä¸‹ä¸€é¦–æŒ‰é’®
            document.getElementById('prevBtn').addEventListener('click', playPrev);
            document.getElementById('nextBtn').addEventListener('click', playNext);
            
            // å–œæ¬¢æŒ‰é’®
            document.getElementById('likeBtn').addEventListener('click', toggleLike);
        }

        // åŠ è½½è®¾ç½®
        function loadSettings() {
            const savedApiBase = localStorage.getItem('netease_api_base');
            if (savedApiBase) {
                API_BASE = savedApiBase;
            }
            
            const savedCookie = localStorage.getItem('netease_cookie');
            if (savedCookie) {
                userCookie = savedCookie;
            }
        }

        // æœç´¢éŸ³ä¹
        async function searchMusic() {
            const searchInput = document.getElementById('searchInput');
            const keywords = searchInput.value.trim();
            
            if (!keywords) {
                alert('è¯·è¾“å…¥æœç´¢å…³é”®è¯');
                return;
            }
            
            const resultsDiv = document.getElementById('searchResults');
            resultsDiv.innerHTML = '<div class="loading"><div class="loading-spinner"></div></div>';
            resultsDiv.style.display = 'block';
            
            try {
                const params = {
                    keywords: encodeURIComponent(keywords),
                    type: 1, // å•æ›²
                    limit: 20,
                    offset: 0
                };
                
                if (userCookie) params.cookie = userCookie;
                
                const url = buildApiUrl('/cloudsearch', params);
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.code === 200 && data.result.songs) {
                    displaySearchResults(data.result.songs);
                } else {
                    resultsDiv.innerHTML = '<div style="color: #dc3545; text-align: center; padding: 2rem;">æœç´¢å¤±è´¥ï¼š' + (data.message || 'æœªçŸ¥é”™è¯¯') + '</div>';
                }
            } catch (error) {
                resultsDiv.innerHTML = '<div style="color: #dc3545; text-align: center; padding: 2rem;">ç½‘ç»œé”™è¯¯ï¼š' + error.message + '</div>';
            }
        }

        // æ˜¾ç¤ºæœç´¢ç»“æœ
        function displaySearchResults(songs) {
            const resultsDiv = document.getElementById('searchResults');
            currentPlaylist = songs;
            
            let html = '<h4 style="margin-bottom: 1rem; color: var(--primary-color);">æœç´¢ç»“æœ (' + songs.length + ')</h4>';
            
            songs.forEach((song, index) => {
                const artists = song.ar ? song.ar.map(artist => artist.name).join(', ') : 'æœªçŸ¥';
                const album = song.al ? song.al.name : 'æœªçŸ¥';
                const cover = song.al ? song.al.picUrl : '';
                const duration = formatTime(song.dt);
                
                html += `
                    <div class="song-item" onclick="playSearchResult(${index})" data-id="${song.id}">
                        <div class="song-cover">
                            ${cover ? `<img src="${cover}?param=50y50" alt="${song.name}">` : 
                                      `<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;"><i class="fas fa-music"></i></div>`}
                        </div>
                        <div class="song-info">
                            <div class="song-title">${song.name}</div>
                            <div class="song-artist">${artists} - ${album}</div>
                        </div>
                        <div class="song-duration">${duration}</div>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }

        // æ’­æ”¾æœç´¢ç»“æœ
        async function playSearchResult(index) {
            const song = currentPlaylist[index];
            
            // æ›´æ–°é«˜äº®
            document.querySelectorAll('#searchResults .song-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // æ›´æ–°æ’­æ”¾å™¨æ˜¾ç¤º
            document.getElementById('trackTitle').textContent = song.name;
            document.getElementById('trackArtist').textContent = song.ar ? song.ar.map(artist => artist.name).join(', ') : 'æœªçŸ¥';
            document.getElementById('trackAlbum').textContent = 'ä¸“è¾‘ï¼š' + (song.al ? song.al.name : 'æœªçŸ¥');
            document.getElementById('trackDuration').textContent = 'æ—¶é•¿ï¼š' + formatTime(song.dt);
            
            // æ›´æ–°ä¸“è¾‘å°é¢
            const albumArt = document.getElementById('albumArt');
            if (song.al && song.al.picUrl) {
                albumArt.className = 'album-art';
                albumArt.innerHTML = `<img src="${song.al.picUrl}?param=200y200" alt="${song.name}">`;
            } else {
                albumArt.className = 'album-art default';
                albumArt.innerHTML = '<i class="fas fa-music"></i>';
            }
            
            // è·å–æ’­æ”¾é“¾æ¥
            try {
                const params = {
                    id: song.id,
                    level: userCookie ? 'exhigh' : 'standard'
                };
                
                if (userCookie) params.cookie = userCookie;
                
                const url = buildApiUrl('/song/url/v1', params);
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.code === 200 && data.data && data.data[0].url) {
                    const songData = data.data[0];
                    document.getElementById('trackQuality').textContent = 'éŸ³è´¨ï¼š' + getQualityText(songData.level);
                    
                    // æ’­æ”¾
                    currentAudio.src = songData.url;
                    currentAudio.play().then(() => {
                        isPlaying = true;
                        document.getElementById('playIcon').className = 'fas fa-pause';
                        currentSongData = song;
                        currentTrackIndex = index;
                    });
                } else {
                    alert('æ— æ³•æ’­æ”¾æ­¤æ­Œæ›²ï¼š' + (data.message || 'æ— ç‰ˆæƒæˆ–VIPä¸“äº«'));
                }
            } catch (error) {
                alert('æ’­æ”¾å¤±è´¥ï¼š' + error.message);
            }
        }

        // è·å–æ¨èéŸ³ä¹
        async function getRecommendations() {
            const recDiv = document.getElementById('recommendations');
            
            try {
                const params = {};
                if (userCookie) params.cookie = userCookie;
                
                const url = buildApiUrl('/personalized/newsong', params);
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.code === 200 && data.result) {
                    displayRecommendations(data.result.slice(0, 10));
                } else {
                    // å¦‚æœæ¨èå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤åˆ—è¡¨
                    getDefaultRecommendations();
                }
            } catch (error) {
                getDefaultRecommendations();
            }
        }

        // æ˜¾ç¤ºæ¨èéŸ³ä¹
        function displayRecommendations(songs) {
            const recDiv = document.getElementById('recommendations');
            
            let html = '<h4 style="margin-bottom: 1rem; color: var(--primary-color);">æ¯æ—¥æ¨è</h4>';
            
            songs.forEach((song, index) => {
                const cover = song.picUrl || (song.song && song.song.al && song.song.al.picUrl) || '';
                const songName = song.name || (song.song && song.song.name) || 'æœªçŸ¥æ­Œæ›²';
                const artist = song.song && song.song.ar ? song.song.ar.map(a => a.name).join(', ') : 'æœªçŸ¥æ­Œæ‰‹';
                
                html += `
                    <div class="song-item" onclick="playRecommendation(${song.id || song.song.id})">
                        <div class="song-cover">
                            ${cover ? `<img src="${cover}?param=50y50" alt="${songName}">` : 
                                      `<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;"><i class="fas fa-music"></i></div>`}
                        </div>
                        <div class="song-info">
                            <div class="song-title">${songName}</div>
                            <div class="song-artist">${artist}</div>
                        </div>
                    </div>
                `;
            });
            
            recDiv.innerHTML = html;
        }

        // é»˜è®¤æ¨èåˆ—è¡¨ï¼ˆå¤‡ç”¨ï¼‰
        function getDefaultRecommendations() {
            const recDiv = document.getElementById('recommendations');
            
            const defaultSongs = [
                { id: 33894312, name: "èµ·é£äº†", artist: "ä¹°è¾£æ¤’ä¹Ÿç”¨åˆ¸" },
                { id: 1330348068, name: "æ²ˆå›­å¤–", artist: "é˜¿YueYue,æˆ¾æ ¼,å°ç”°éŸ³ä¹ç¤¾" },
                { id: 1441758494, name: "å¦‚æ„¿", artist: "ç‹è²" },
                { id: 1901371647, name: "é›ª Distance", artist: "Capper,ç½—è¨€RollFlash" },
                { id: 1974443814, name: "æˆ‘ä¼šç­‰", artist: "æ‰¿æ¡“" },
                { id: 202373, name: "æ™´å¤©", artist: "å‘¨æ°ä¼¦" },
                { id: 65528, name: "æ±Ÿå—", artist: "æ—ä¿Šæ°" },
                { id: 108478, name: "æ³¡æ²«", artist: "G.E.M.é‚“ç´«æ£‹" }
            ];
            
            let html = '<h4 style="margin-bottom: 1rem; color: var(--primary-color);">çƒ­é—¨æ­Œæ›²</h4>';
            
            defaultSongs.forEach((song, index) => {
                html += `
                    <div class="song-item" onclick="playSongById(${song.id})">
                        <div class="song-cover">
                            <div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;"><i class="fas fa-music"></i></div>
                        </div>
                        <div class="song-info">
                            <div class="song-title">${song.name}</div>
                            <div class="song-artist">${song.artist}</div>
                        </div>
                    </div>
                `;
            });
            
            recDiv.innerHTML = html;
        }

        // é€šè¿‡IDæ’­æ”¾æ­Œæ›²
        async function playSongById(songId) {
            try {
                // è·å–æ­Œæ›²è¯¦æƒ…
                const songUrl = buildApiUrl('/song/detail', { ids: songId });
                const songResponse = await fetch(songUrl);
                const songData = await songResponse.json();
                
                if (songData.code === 200 && songData.songs[0]) {
                    const song = songData.songs[0];
                    
                    // æ›´æ–°æ’­æ”¾å™¨æ˜¾ç¤º
                    document.getElementById('trackTitle').textContent = song.name;
                    document.getElementById('trackArtist').textContent = song.ar ? song.ar.map(artist => artist.name).join(', ') : 'æœªçŸ¥';
                    document.getElementById('trackAlbum').textContent = 'ä¸“è¾‘ï¼š' + (song.al ? song.al.name : 'æœªçŸ¥');
                    document.getElementById('trackDuration').textContent = 'æ—¶é•¿ï¼š' + formatTime(song.dt);
                    
                    // æ›´æ–°ä¸“è¾‘å°é¢
                    const albumArt = document.getElementById('albumArt');
                    if (song.al && song.al.picUrl) {
                        albumArt.className = 'album-art';
                        albumArt.innerHTML = `<img src="${song.al.picUrl}?param=200y200" alt="${song.name}">`;
                    } else {
                        albumArt.className = 'album-art default';
                        albumArt.innerHTML = '<i class="fas fa-music"></i>';
                    }
                    
                    // è·å–æ’­æ”¾é“¾æ¥
                    const params = {
                        id: songId,
                        level: userCookie ? 'exhigh' : 'standard'
                    };
                    
                    if (userCookie) params.cookie = userCookie;
                    
                    const url = buildApiUrl('/song/url/v1', params);
                    const response = await fetch(url);
                    const data = await response.json();
                    
                    if (data.code === 200 && data.data && data.data[0].url) {
                        const audioData = data.data[0];
                        document.getElementById('trackQuality').textContent = 'éŸ³è´¨ï¼š' + getQualityText(audioData.level);
                        
                        // æ’­æ”¾
                        currentAudio.src = audioData.url;
                        currentAudio.play().then(() => {
                            isPlaying = true;
                            document.getElementById('playIcon').className = 'fas fa-pause';
                            currentSongData = song;
                        });
                    }
                }
            } catch (error) {
                alert('æ’­æ”¾å¤±è´¥ï¼š' + error.message);
            }
        }

        // æ’­æ”¾æ¨èæ­Œæ›²
        async function playRecommendation(songId) {
            await playSongById(songId);
        }

        // æ’­æ”¾/æš‚åœ
        function togglePlay() {
            if (!currentAudio.src) {
                // å¦‚æœæ²¡æœ‰æ­Œæ›²ï¼Œæ’­æ”¾ç¬¬ä¸€é¦–æ¨è
                const firstSong = document.querySelector('#recommendations .song-item');
                if (firstSong) {
                    const songId = firstSong.getAttribute('onclick').match(/\d+/)[0];
                    playSongById(songId);
                }
                return;
            }
            
            if (isPlaying) {
                currentAudio.pause();
                document.getElementById('playIcon').className = 'fas fa-play';
            } else {
                currentAudio.play().then(() => {
                    document.getElementById('playIcon').className = 'fas fa-pause';
                });
            }
            isPlaying = !isPlaying;
        }

        // æ’­æ”¾ä¸Šä¸€é¦–
        function playPrev() {
            if (currentPlaylist.length === 0) return;
            
            currentTrackIndex--;
            if (currentTrackIndex < 0) {
                currentTrackIndex = currentPlaylist.length - 1;
            }
            
            const song = currentPlaylist[currentTrackIndex];
            if (song && song.id) {
                playSongById(song.id);
            }
        }

        // æ’­æ”¾ä¸‹ä¸€é¦–
        function playNext() {
            if (currentPlaylist.length === 0) return;
            
            currentTrackIndex++;
            if (currentTrackIndex >= currentPlaylist.length) {
                currentTrackIndex = 0;
            }
            
            const song = currentPlaylist[currentTrackIndex];
            if (song && song.id) {
                playSongById(song.id);
            }
        }

        // åˆ‡æ¢å–œæ¬¢çŠ¶æ€
        function toggleLike() {
            const likeBtn = document.getElementById('likeBtn');
            if (likeBtn.querySelector('.fas.fa-heart')) {
                likeBtn.innerHTML = '<i class="far fa-heart"></i>';
            } else {
                likeBtn.innerHTML = '<i class="fas fa-heart" style="color: var(--primary-color);"></i>';
            }
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            if (!currentAudio.duration) return;
            
            const progressPercent = (currentAudio.currentTime / currentAudio.duration) * 100;
            document.getElementById('progress').style.width = progressPercent + '%';
            document.getElementById('currentTime').textContent = formatTime(currentAudio.currentTime);
        }

        // å·¥å…·å‡½æ•°
        function buildApiUrl(endpoint, params = {}) {
            const baseParams = {
                timestamp: Date.now(),
                randomCNIP: true
            };
            
            const allParams = { ...baseParams, ...params };
            const queryString = new URLSearchParams(allParams).toString();
            
            return `${API_BASE}${endpoint}?${queryString}`;
        }

        function formatTime(milliseconds) {
            const seconds = Math.floor(milliseconds / 1000);
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function getQualityText(level) {
            const qualityMap = {
                'standard': 'æ ‡å‡†',
                'higher': 'è¾ƒé«˜',
                'exhigh': 'æé«˜',
                'lossless': 'æ— æŸ',
                'hires': 'Hi-Res'
            };
            return qualityMap[level] || level;
        }

        // ç™»å½•ç›¸å…³åŠŸèƒ½
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
        }

        function hideLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
        }

        async function handleLogin() {
            const account = document.getElementById('loginAccount').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!account || !password) {
                alert('è¯·è¾“å…¥è´¦å·å’Œå¯†ç ');
                return;
            }
            
            // è¿™é‡Œåº”è¯¥è°ƒç”¨ç™»å½•API
            // ç”±äºå®‰å…¨åŸå› ï¼Œä¸å»ºè®®åœ¨å‰ç«¯ç›´æ¥å¤„ç†å¯†ç ç™»å½•
            // å»ºè®®ä½¿ç”¨äºŒç»´ç ç™»å½•
            alert('å»ºè®®ä½¿ç”¨äºŒç»´ç ç™»å½•ä»¥ä¿éšœå®‰å…¨');
        }

        async function startQRLogin() {
            hideLoginModal();
            
            try {
                // è·å–äºŒç»´ç key
                const keyUrl = buildApiUrl('/login/qr/key');
                const keyResponse = await fetch(keyUrl);
                const keyData = await keyResponse.json();
                
                if (keyData.code !== 200) {
                    throw new Error('è·å–äºŒç»´ç å¤±è´¥');
                }
                
                const qrKey = keyData.data.unikey;
                
                // ç”ŸæˆäºŒç»´ç 
                const qrUrl = buildApiUrl('/login/qr/create', { 
                    key: qrKey, 
                    qrimg: true 
                });
                const qrResponse = await fetch(qrUrl);
                const qrData = await qrResponse.json();
                
                if (qrData.code !== 200) {
                    throw new Error('ç”ŸæˆäºŒç»´ç å¤±è´¥');
                }
                
                // æ˜¾ç¤ºäºŒç»´ç 
                const qrWindow = window.open('', 'äºŒç»´ç ç™»å½•', 'width=400,height=500');
                qrWindow.document.write(`
                    <html>
                    <head>
                        <title>ç½‘æ˜“äº‘éŸ³ä¹ - æ‰«ç ç™»å½•</title>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 20px; text-align: center; }
                            h3 { color: #e60026; }
                            img { max-width: 300px; margin: 20px 0; }
                            .status { color: #666; margin: 10px 0; }
                        </style>
                    </head>
                    <body>
                        <h3>ç½‘æ˜“äº‘éŸ³ä¹æ‰«ç ç™»å½•</h3>
                        <img src="${qrData.data.qrimg}" alt="ç™»å½•äºŒç»´ç ">
                        <p class="status">è¯·ä½¿ç”¨ç½‘æ˜“äº‘éŸ³ä¹APPæ‰«ç ç™»å½•</p>
                        <p><small>æ‰«ç åè‡ªåŠ¨ç™»å½•ï¼Œçª—å£å°†è‡ªåŠ¨å…³é—­</small></p>
                        <button onclick="window.close()">å…³é—­</button>
                    </body>
                    </html>
                `);
                
                // è½®è¯¢ç™»å½•çŠ¶æ€
                const checkInterval = setInterval(async () => {
                    try {
                        const checkUrl = buildApiUrl('/login/qr/check', { key: qrKey });
                        const checkResponse = await fetch(checkUrl);
                        const checkData = await checkResponse.json();
                        
                        if (checkData.code === 803) {
                            // ç™»å½•æˆåŠŸ
                            clearInterval(checkInterval);
                            userCookie = checkData.cookie;
                            localStorage.setItem('netease_cookie', userCookie);
                            qrWindow.close();
                            
                            updateLoginStatus();
                            alert('ç™»å½•æˆåŠŸï¼');
                            getRecommendations(); // åˆ·æ–°æ¨è
                        } else if (checkData.code === 800) {
                            clearInterval(checkInterval);
                            alert('äºŒç»´ç å·²è¿‡æœŸï¼Œè¯·é‡æ–°æ‰«æ');
                        }
                    } catch (error) {
                        console.error('æ£€æŸ¥ç™»å½•çŠ¶æ€å¤±è´¥:', error);
                    }
                }, 2000);
                
            } catch (error) {
                alert('ç™»å½•å¤±è´¥ï¼š' + error.message);
            }
        }

        // æ›´æ–°ç™»å½•çŠ¶æ€
        function updateLoginStatus() {
            if (userCookie) {
                document.getElementById('loginStatus').textContent = 'å·²ç™»å½•';
                document.getElementById('loginStatus').style.color = '#28a745';
                document.getElementById('qualityStatus').textContent = 'é«˜è´¨é‡éŸ³è´¨';
                document.getElementById('qualityStatus').style.color = '#28a745';
            } else {
                document.getElementById('loginStatus').textContent = 'æœªç™»å½•';
                document.getElementById('loginStatus').style.color = '#dc3545';
                document.getElementById('qualityStatus').textContent = 'æ ‡å‡†éŸ³è´¨';
                document.getElementById('qualityStatus').style.color = '#ffc107';
            }
        }

        async function checkLoginStatus() {
            if (!userCookie) {
                alert('å½“å‰æœªç™»å½•');
                return;
            }
            
            try {
                const url = buildApiUrl('/login/status', { cookie: userCookie });
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.code === 200 && data.data.profile) {
                    alert(`ç™»å½•çŠ¶æ€æ­£å¸¸\nç”¨æˆ·: ${data.data.profile.nickname}\nVIP: ${data.data.profile.vipType ? 'æ˜¯' : 'å¦'}`);
                    updateLoginStatus();
                } else {
                    alert('ç™»å½•çŠ¶æ€å·²è¿‡æœŸ');
                    localStorage.removeItem('netease_cookie');
                    userCookie = null;
                    updateLoginStatus();
                }
            } catch (error) {
                alert('æ£€æŸ¥å¤±è´¥ï¼š' + error.message);
            }
        }

        // æ£€æŸ¥APIçŠ¶æ€
        async function checkAPIStatus() {
            try {
                const url = buildApiUrl('/login/status');
                const response = await fetch(url);
                
                if (response.ok) {
                    document.getElementById('apiStatus').textContent = 'æ­£å¸¸';
                    document.getElementById('apiStatus').style.color = '#28a745';
                } else {
                    document.getElementById('apiStatus').textContent = 'å¼‚å¸¸';
                    document.getElementById('apiStatus').style.color = '#dc3545';
                }
            } catch (error) {
                document.getElementById('apiStatus').textContent = 'å¤±è´¥';
                document.getElementById('apiStatus').style.color = '#dc3545';
            }
        }

        // å…¶ä»–åŠŸèƒ½
        async function getPersonalized() {
            if (!userCookie) {
                alert('ä¸ªæ€§åŒ–æ¨èéœ€è¦ç™»å½•åä½¿ç”¨');
                showLoginModal();
                return;
            }
            
            try {
                const url = buildApiUrl('/recommend/songs', { cookie: userCookie });
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.code === 200 && data.data.dailySongs) {
                    displayRecommendations(data.data.dailySongs.slice(0, 10));
                } else {
                    getRecommendations(); // å›é€€åˆ°æ™®é€šæ¨è
                }
            } catch (error) {
                getRecommendations();
            }
        }

        async function getTopList() {
            try {
                const url = buildApiUrl('/toplist');
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.code === 200 && data.list) {
                    // è¿™é‡Œå¯ä»¥æ˜¾ç¤ºæ’è¡Œæ¦œ
                    alert('æ’è¡Œæ¦œåŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
                }
            } catch (error) {
                alert('è·å–æ’è¡Œæ¦œå¤±è´¥ï¼š' + error.message);
            }
        }
    </script>
</body>
</html>
