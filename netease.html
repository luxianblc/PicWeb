<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½‘æ˜“äº‘éŸ³ä¹ - æ­£å¼ç‰ˆ</title>
    
    <!-- æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- ç½‘ç«™å›¾æ ‡ -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸµ</text></svg>">
    
    <style>
        /* å…¨å±€æ ·å¼ */
        :root {
            --primary-color: #e60026;
            --primary-light: #ff2d55;
            --bg-dark: #0a0a0a;
            --bg-card: #1a1a1a;
            --bg-hover: #2a2a2a;
            --text-primary: #f5f5f5;
            --text-secondary: #b3b3b3;
            --text-muted: #888888;
            --border-color: #333333;
            --gradient-primary: linear-gradient(135deg, #e60026, #ff2d55);
            --gradient-dark: linear-gradient(135deg, #0f0f0f, #1a1a1a);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--gradient-dark);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* å¯¼èˆªæ æ ·å¼ */
        .navbar {
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
        }
        
        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            padding: 8px 12px;
            border-radius: 8px;
        }
        
        .nav-link:hover {
            color: var(--text-primary);
            background: rgba(230, 0, 38, 0.1);
        }
        
        .nav-link.active {
            color: #fff;
            background: rgba(230, 0, 38, 0.2);
        }
        
        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .main-content {
            padding: 2rem 0;
        }
        
        .page-title {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .page-title h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }
        
        .page-title p {
            color: var(--text-secondary);
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: rgba(26, 26, 26, 0.8);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            padding: 2rem;
            margin-bottom: 2rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(230, 0, 38, 0.15);
        }
        
        /* æ’­æ”¾å™¨æ ·å¼ */
        .music-player-container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .player-header {
            background: rgba(230, 0, 38, 0.1);
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            border-radius: 16px 16px 0 0;
            margin-bottom: 0;
        }
        
        .player-header h3 {
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-primary);
        }
        
        .player-main {
            padding: 2rem;
        }
        
        .player-info {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .album-art {
            width: 180px;
            height: 180px;
            border-radius: 12px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            flex-shrink: 0;
            position: relative;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .album-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .album-art:hover img {
            transform: scale(1.05);
        }
        
        .album-art.default {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            color: var(--primary-color);
            background: rgba(230, 0, 38, 0.1);
        }
        
        .track-info {
            flex: 1;
        }
        
        .track-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            line-height: 1.3;
            color: var(--text-primary);
        }
        
        .track-artist {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        
        .track-meta {
            display: flex;
            gap: 2rem;
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 1.5rem;
        }
        
        /* è¿›åº¦æ¡ */
        .progress-container {
            margin: 2rem 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 3px;
            margin: 1rem 0;
            overflow: hidden;
            cursor: pointer;
        }
        
        .progress {
            width: 0%;
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 3px;
            transition: width 0.1s linear;
        }
        
        .time-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-muted);
        }
        
        /* æ§åˆ¶æŒ‰é’® */
        .player-controls {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .control-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
        }
        
        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.12);
            color: var(--text-primary);
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            transform: scale(1.05);
            background: rgba(230, 0, 38, 0.15);
            border-color: rgba(230, 0, 38, 0.3);
        }
        
        .play-btn {
            width: 65px;
            height: 65px;
            font-size: 1.5rem;
            background: var(--gradient-primary);
            border: none;
        }
        
        .play-btn:hover {
            box-shadow: 0 0 25px rgba(230, 0, 38, 0.4);
        }
        
        /* éŸ³é‡æ§åˆ¶ */
        .volume-control {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .volume-slider {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            cursor: pointer;
            background: var(--primary-color);
        }
        
        /* åŠŸèƒ½åŒºåŸŸ */
        .function-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .function-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1.5rem;
        }
        
        .function-header h3 {
            font-size: 1.3rem;
            color: var(--text-primary);
        }
        
        /* è¾“å…¥æ¡†æ ·å¼ */
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        .input-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .input-field {
            width: 100%;
            padding: 0.9rem 1.2rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: inherit;
            transition: all 0.3s;
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(230, 0, 38, 0.1);
            background: rgba(255, 255, 255, 0.08);
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 0.9rem 1.8rem;
            border: none;
            border-radius: 10px;
            font-family: inherit;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.95rem;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(230, 0, 38, 0.3);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        
        /* æ­Œæ›²åˆ—è¡¨ */
        .song-list {
            margin-top: 1rem;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .song-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.03);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .song-item:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .song-item.active {
            background: rgba(230, 0, 38, 0.12);
            border-color: rgba(230, 0, 38, 0.3);
        }
        
        .song-cover {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            overflow: hidden;
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .song-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .song-info {
            flex: 1;
            min-width: 0;
        }
        
        .song-title {
            font-weight: 600;
            margin-bottom: 0.2rem;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .song-artist {
            font-size: 0.9rem;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .song-duration {
            font-size: 0.9rem;
            color: var(--text-muted);
            flex-shrink: 0;
        }
        
        /* çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 0.3rem 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .status-online {
            background: #28a745;
            box-shadow: 0 0 8px rgba(40, 167, 69, 0.5);
        }
        
        .status-offline {
            background: #dc3545;
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-slide-up {
            animation: slideInUp 0.5s ease forwards;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            
            .nav-links {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
                gap: 1rem;
            }
            
            .page-title h1 {
                font-size: 2.5rem;
            }
            
            .player-info {
                flex-direction: column;
                text-align: center;
            }
            
            .album-art {
                width: 150px;
                height: 150px;
            }
            
            .control-buttons {
                gap: 1rem;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* é¡µè„š */
        .footer {
            text-align: center;
            padding: 2.5rem 0;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-color);
            margin-top: 3rem;
            background: rgba(10, 10, 10, 0.8);
        }
        
        .footer p {
            margin-bottom: 0.5rem;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        
        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s;
        }
        
        .footer-link:hover {
            color: var(--text-primary);
        }
        
        /* å·¥å…·æç¤º */
        [title] {
            position: relative;
        }
        
        [title]:hover::after {
            content: attr(title);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 6px 12px;
            background: rgba(0, 0, 0, 0.9);
            color: var(--text-primary);
            font-size: 12px;
            white-space: nowrap;
            border-radius: 4px;
            pointer-events: none;
            z-index: 1000;
            margin-bottom: 8px;
        }
        
        /* ä¸»å†…å®¹åŠ¨ç”» */
        .main-content {
            opacity: 0;
            animation: fadeIn 0.8s ease 0.2s forwards;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="container nav-container">
            <a href="#" class="logo">
                <i class="fas fa-music"></i>
                ç½‘æ˜“äº‘éŸ³ä¹
            </a>
            <div class="nav-links">
                <a href="#" class="nav-link active">
                    <i class="fas fa-home"></i> å‘ç°éŸ³ä¹
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-compass"></i> æµè§ˆ
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-radio"></i> ç§äººFM
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-heart"></i> æˆ‘çš„å–œæ¬¢
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-user"></i> æˆ‘çš„ä¸»é¡µ
                </a>
            </div>
            <div class="status-indicator">
                <span class="status-dot status-online"></span>
                <span>åœ¨çº¿</span>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹ -->
    <main class="main-content">
        <div class="container">
            <!-- é¡µé¢æ ‡é¢˜ -->
            <div class="page-title animate-slide-up">
                <h1>å‘ç°éŸ³ä¹ä¹‹æ—…</h1>
                <p>åƒä¸‡æ›²åº“ï¼Œæ™ºèƒ½æ¨èï¼Œå‘ç°å±äºä½ çš„éŸ³ä¹ä¸–ç•Œ</p>
            </div>

            <!-- éŸ³ä¹æ’­æ”¾å™¨ -->
            <div class="music-player-container animate-slide-up" style="animation-delay: 0.1s">
                <div class="card">
                    <div class="player-header">
                        <h3><i class="fas fa-play-circle"></i> æ­£åœ¨æ’­æ”¾</h3>
                    </div>
                    <div class="player-main">
                        <div class="player-info">
                            <div class="album-art default" id="albumArt">
                                <i class="fas fa-music"></i>
                            </div>
                            <div class="track-info">
                                <h2 class="track-title" id="trackTitle">é€‰æ‹©ä¸€é¦–æ­Œæ›²å¼€å§‹æ’­æ”¾</h2>
                                <p class="track-artist" id="trackArtist">-</p>
                                <div class="track-meta">
                                    <span id="trackAlbum">ä¸“è¾‘ï¼š-</span>
                                    <span id="trackDuration">æ—¶é•¿ï¼š-</span>
                                    <span id="trackQuality">éŸ³è´¨ï¼šæ ‡å‡†</span>
                                </div>
                                
                                <div class="progress-container">
                                    <div class="time-info">
                                        <span id="currentTime">0:00</span>
                                        <span id="totalTime">0:00</span>
                                    </div>
                                    <div class="progress-bar" id="progressBar">
                                        <div class="progress" id="progress"></div>
                                    </div>
                                </div>
                                
                                <div class="player-controls">
                                    <div class="control-buttons">
                                        <button class="control-btn" id="prevBtn" title="ä¸Šä¸€é¦–">
                                            <i class="fas fa-step-backward"></i>
                                        </button>
                                        <button class="control-btn play-btn" id="playBtn" title="æ’­æ”¾/æš‚åœ">
                                            <i class="fas fa-play" id="playIcon"></i>
                                        </button>
                                        <button class="control-btn" id="nextBtn" title="ä¸‹ä¸€é¦–">
                                            <i class="fas fa-step-forward"></i>
                                        </button>
                                        <button class="control-btn" id="likeBtn" title="æ·»åŠ åˆ°å–œæ¬¢">
                                            <i class="far fa-heart"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="volume-control">
                                        <i class="fas fa-volume-up" style="color: var(--primary-color);"></i>
                                        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50">
                                        <span id="volumePercent">50%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- åŠŸèƒ½åŒºåŸŸ -->
            <div class="function-grid animate-slide-up" style="animation-delay: 0.2s">
                <!-- æœç´¢åŠŸèƒ½ -->
                <div class="card">
                    <div class="function-header">
                        <i class="fas fa-search" style="color: var(--primary-color);"></i>
                        <h3>æœç´¢éŸ³ä¹</h3>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">æœç´¢æ­Œæ›²ã€æ­Œæ‰‹æˆ–ä¸“è¾‘</label>
                        <input type="text" class="input-field" id="searchInput" placeholder="è¾“å…¥å…³é”®è¯...">
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="searchMusic()">
                            <i class="fas fa-search"></i> æœç´¢
                        </button>
                        <button class="btn btn-secondary" onclick="getRecommendations()">
                            <i class="fas fa-fire"></i> çƒ­é—¨æ¨è
                        </button>
                    </div>
                    
                    <div class="song-list" id="searchResults" style="display: none;">
                        <h4 style="margin-bottom: 1rem; color: var(--primary-color);">æœç´¢ç»“æœ</h4>
                        <!-- æœç´¢ç»“æœå°†åŠ¨æ€æ’å…¥ -->
                    </div>
                </div>
                
                <!-- æ¨èåŠŸèƒ½ -->
                <div class="card">
                    <div class="function-header">
                        <i class="fas fa-star" style="color: #ffc107;"></i>
                        <h3>æ¯æ—¥æ¨è</h3>
                    </div>
                    
                    <div class="song-list" id="recommendations">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="getPersonalized()">
                            <i class="fas fa-user-check"></i> ä¸ªæ€§æ¨è
                        </button>
                        <button class="btn btn-secondary" onclick="getTopList()">
                            <i class="fas fa-chart-line"></i> æ’è¡Œæ¦œ
                        </button>
                    </div>
                </div>
            </div>

            <!-- è´¦æˆ·çŠ¶æ€ -->
            <div class="card animate-slide-up" style="animation-delay: 0.3s">
                <div class="function-header">
                    <i class="fas fa-user-circle" style="color: var(--primary-color);"></i>
                    <h3>è´¦æˆ·ä¿¡æ¯</h3>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin: 1.5rem 0;">
                    <div class="status-card">
                        <h4 style="color: var(--text-secondary); margin-bottom: 0.5rem; font-size: 0.9rem;">ç™»å½•çŠ¶æ€</h4>
                        <div id="loginStatus" style="color: #dc3545; font-weight: 600; font-size: 1.1rem;">æœªç™»å½•</div>
                    </div>
                    <div class="status-card">
                        <h4 style="color: var(--text-secondary); margin-bottom: 0.5rem; font-size: 0.9rem;">éŸ³è´¨æƒé™</h4>
                        <div id="qualityStatus" style="color: #ffc107; font-weight: 600; font-size: 1.1rem;">æ ‡å‡†éŸ³è´¨</div>
                    </div>
                    <div class="status-card">
                        <h4 style="color: var(--text-secondary); margin-bottom: 0.5rem; font-size: 0.9rem;">APIçŠ¶æ€</h4>
                        <div id="apiStatus" style="color: #28a745; font-weight: 600; font-size: 1.1rem;">æ­£å¸¸</div>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showLoginModal()">
                        <i class="fas fa-sign-in-alt"></i> ç«‹å³ç™»å½•
                    </button>
                    <button class="btn btn-secondary" onclick="checkLoginStatus()">
                        <i class="fas fa-sync-alt"></i> åˆ·æ–°çŠ¶æ€
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <p style="font-size: 1.1rem; margin-bottom: 1rem;">ç½‘æ˜“äº‘éŸ³ä¹</p>
            <p style="color: var(--text-muted); margin-bottom: 1.5rem;">éŸ³ä¹çš„åŠ›é‡ï¼Œè§¦æ‰‹å¯åŠ</p>
            
            <div class="footer-links">
                <a href="#" class="footer-link">å…³äºæˆ‘ä»¬</a>
                <a href="#" class="footer-link">ç”¨æˆ·åè®®</a>
                <a href="#" class="footer-link">éšç§æ”¿ç­–</a>
                <a href="#" class="footer-link">å¸®åŠ©ä¸­å¿ƒ</a>
                <a href="#" class="footer-link">è”ç³»æˆ‘ä»¬</a>
            </div>
            
            <p style="margin-top: 1.5rem; color: var(--text-muted); font-size: 0.9rem;">
                &copy; 2024 ç½‘æ˜“å…¬å¸ ç‰ˆæƒæ‰€æœ‰ | æœ¬äº§å“ä»…ç”¨äºå­¦ä¹ äº¤æµï¼Œè¯·æ”¯æŒæ­£ç‰ˆéŸ³ä¹
            </p>
        </div>
    </footer>

    <!-- ç™»å½•æ¨¡æ€æ¡† -->
    <div id="loginModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.85); z-index: 2000; align-items: center; justify-content: center;">
        <div class="card" style="max-width: 400px; width: 90%;">
            <h3 style="color: var(--primary-color); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-sign-in-alt"></i> ç™»å½•ç½‘æ˜“äº‘éŸ³ä¹
            </h3>
            
            <div class="input-group">
                <label class="input-label">æ‰‹æœºå·/é‚®ç®±</label>
                <input type="text" class="input-field" id="loginAccount" placeholder="è¯·è¾“å…¥æ‰‹æœºå·æˆ–é‚®ç®±">
            </div>
            
            <div class="input-group">
                <label class="input-label">å¯†ç </label>
                <input type="password" class="input-field" id="loginPassword" placeholder="è¯·è¾“å…¥å¯†ç ">
            </div>
            
            <div class="btn-group" style="margin-top: 2rem;">
                <button class="btn btn-primary" onclick="handleLogin()">
                    <i class="fas fa-sign-in-alt"></i> ç™»å½•
                </button>
                <button class="btn btn-secondary" onclick="hideLoginModal()">
                    <i class="fas fa-times"></i> å–æ¶ˆ
                </button>
            </div>
            
            <div style="margin-top: 1.5rem; text-align: center; color: var(--text-secondary); padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
                <p style="margin-bottom: 1rem;">æˆ–ä½¿ç”¨äºŒç»´ç ç™»å½•</p>
                <button class="btn btn-secondary" onclick="startQRLogin()" style="width: 100%;">
                    <i class="fas fa-qrcode"></i> äºŒç»´ç ç™»å½•
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript ä»£ç  -->
    <script>
        // å…¨å±€å˜é‡
        let API_BASE = 'https://neteaseapi-enhanced.vercel.app';
        let currentAudio = null;
        let currentTrackIndex = 0;
        let isPlaying = false;
        let currentPlaylist = [];
        let userCookie = null;

        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ç½‘æ˜“äº‘éŸ³ä¹æ­£å¼ç‰ˆå·²åŠ è½½');
            
            // åˆå§‹åŒ–æ’­æ”¾å™¨
            initPlayer();
            
            // åŠ è½½æ¨èéŸ³ä¹
            getRecommendations();
            
            // æ›´æ–°ç™»å½•çŠ¶æ€
            updateLoginStatus();
            
            // æ£€æŸ¥APIçŠ¶æ€
            checkAPIStatus();
            
            // è®¾ç½®é»˜è®¤éŸ³é‡
            document.getElementById('volumeSlider').value = 50;
        });

        // åˆå§‹åŒ–æ’­æ”¾å™¨
        function initPlayer() {
            const audio = new Audio();
            currentAudio = audio;
            
            // DOMå…ƒç´ 
            const playBtn = document.getElementById('playBtn');
            const playIcon = document.getElementById('playIcon');
            const progress = document.getElementById('progress');
            const progressBar = document.getElementById('progressBar');
            const volumeSlider = document.getElementById('volumeSlider');
            
            // æ’­æ”¾/æš‚åœ
            playBtn.addEventListener('click', togglePlay);
            
            // éŸ³é‡æ§åˆ¶
            volumeSlider.addEventListener('input', function() {
                audio.volume = this.value / 100;
                document.getElementById('volumePercent').textContent = this.value + '%';
            });
            
            // è¿›åº¦æ¡æ§åˆ¶
            progressBar.addEventListener('click', function(e) {
                if (!audio.duration) return;
                const percent = e.offsetX / this.clientWidth;
                audio.currentTime = percent * audio.duration;
            });
            
            // éŸ³é¢‘äº‹ä»¶ç›‘å¬
            audio.addEventListener('timeupdate', updateProgress);
            audio.addEventListener('loadedmetadata', function() {
                document.getElementById('totalTime').textContent = formatTime(audio.duration);
            });
            audio.addEventListener('ended', function() {
                isPlaying = false;
                playIcon.className = 'fas fa-play';
                // æ’­æ”¾ä¸‹ä¸€é¦–
                setTimeout(() => {
                    playNext();
                }, 1000);
            });
            
            // ä¸Šä¸€é¦–/ä¸‹ä¸€é¦–æŒ‰é’®
            document.getElementById('prevBtn').addEventListener('click', playPrev);
            document.getElementById('nextBtn').addEventListener('click', playNext);
            
            // å–œæ¬¢æŒ‰é’®
            document.getElementById('likeBtn').addEventListener('click', toggleLike);
        }

        // æœç´¢éŸ³ä¹
        async function searchMusic() {
            const searchInput = document.getElementById('searchInput');
            const keywords = searchInput.value.trim();
            
            if (!keywords) {
                alert('è¯·è¾“å…¥æœç´¢å…³é”®è¯');
                return;
            }
            
            const resultsDiv = document.getElementById('searchResults');
            resultsDiv.innerHTML = '<div class="loading"><div class="loading-spinner"></div></div>';
            resultsDiv.style.display = 'block';
            
            try {
                const params = {
                    keywords: encodeURIComponent(keywords),
                    type: 1,
                    limit: 15,
                    offset: 0
                };
                
                if (userCookie) params.cookie = userCookie;
                
                const url = buildApiUrl('/cloudsearch', params);
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.code === 200 && data.result.songs) {
                    displaySearchResults(data.result.songs);
                } else {
                    resultsDiv.innerHTML = '<div style="color: #dc3545; text-align: center; padding: 2rem;">æœç´¢å¤±è´¥ï¼š' + (data.message || 'æœªçŸ¥é”™è¯¯') + '</div>';
                }
            } catch (error) {
                resultsDiv.innerHTML = '<div style="color: #dc3545; text-align: center; padding: 2rem;">ç½‘ç»œé”™è¯¯ï¼š' + error.message + '</div>';
            }
        }

        // æ˜¾ç¤ºæœç´¢ç»“æœ
        function displaySearchResults(songs) {
            const resultsDiv = document.getElementById('searchResults');
            currentPlaylist = songs;
            
            let html = '<h4 style="margin-bottom: 1rem; color: var(--primary-color);">æœç´¢ç»“æœ (' + songs.length + ')</h4>';
            
            songs.forEach((song, index) => {
                const artists = song.ar ? song.ar.map(artist => artist.name).join(', ') : 'æœªçŸ¥';
                const album = song.al ? song.al.name : 'æœªçŸ¥';
                const cover = song.al ? song.al.picUrl : '';
                const duration = formatTime(song.dt);
                
                html += `
                    <div class="song-item" onclick="playSearchResult(${index})" data-id="${song.id}">
                        <div class="song-cover">
                            ${cover ? `<img src="${cover}?param=50y50" alt="${song.name}" onerror="this.style.display='none'; this.parentElement.innerHTML='<i class=\"fas fa-music\" style=\"color: var(--text-muted); font-size: 1.2rem;\"></i>'">` : 
                                      `<i class="fas fa-music" style="color: var(--text-muted); font-size: 1.2rem;"></i>`}
                        </div>
                        <div class="song-info">
                            <div class="song-title">${song.name}</div>
                            <div class="song-artist">${artists}</div>
                        </div>
                        <div class="song-duration">${duration}</div>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }

        // æ’­æ”¾æœç´¢ç»“æœ
        async function playSearchResult(index) {
            const song = currentPlaylist[index];
            
            // æ›´æ–°é«˜äº®
            document.querySelectorAll('#searchResults .song-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // æ›´æ–°æ’­æ”¾å™¨æ˜¾ç¤º
            document.getElementById('trackTitle').textContent = song.name;
            document.getElementById('trackArtist').textContent = song.ar ? song.ar.map(artist => artist.name).join(', ') : 'æœªçŸ¥';
            document.getElementById('trackAlbum').textContent = 'ä¸“è¾‘ï¼š' + (song.al ? song.al.name : 'æœªçŸ¥');
            document.getElementById('trackDuration').textContent = 'æ—¶é•¿ï¼š' + formatTime(song.dt);
            
            // æ›´æ–°ä¸“è¾‘å°é¢
            const albumArt = document.getElementById('albumArt');
            if (song.al && song.al.picUrl) {
                albumArt.className = 'album-art';
                albumArt.innerHTML = `<img src="${song.al.picUrl}?param=200y200" alt="${song.name}" onerror="this.style.display='none'; this.parentElement.innerHTML='<i class=\"fas fa-music\" style=\"color: var(--primary-color); font-size: 3.5rem;\"></i>'">`;
            } else {
                albumArt.className = 'album-art default';
                albumArt.innerHTML = '<i class="fas fa-music"></i>';
            }
            
            // è·å–æ’­æ”¾é“¾æ¥
            try {
                const params = {
                    id: song.id,
                    level: userCookie ? 'exhigh' : 'standard'
                };
                
                if (userCookie) params.cookie = userCookie;
                
                const url = buildApiUrl('/song/url/v1', params);
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.code === 200 && data.data && data.data[0].url) {
                    const songData = data.data[0];
                    document.getElementById('trackQuality').textContent = 'éŸ³è´¨ï¼š' + getQualityText(songData.level);
                    
                    // æ’­æ”¾
                    currentAudio.src = songData.url;
                    currentAudio.play().then(() => {
                        isPlaying = true;
                        document.getElementById('playIcon').className = 'fas fa-pause';
                        currentTrackIndex = index;
                    });
                } else {
                    alert('æ— æ³•æ’­æ”¾æ­¤æ­Œæ›²ï¼š' + (data.message || 'æ— ç‰ˆæƒæˆ–VIPä¸“äº«'));
                }
            } catch (error) {
                alert('æ’­æ”¾å¤±è´¥ï¼š' + error.message);
            }
        }

        // è·å–æ¨èéŸ³ä¹
        async function getRecommendations() {
            const recDiv = document.getElementById('recommendations');
            
            try {
                const params = {};
                if (userCookie) params.cookie = userCookie;
                
                const url = buildApiUrl('/personalized/newsong', params);
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.code === 200 && data.result) {
                    displayRecommendations(data.result.slice(0, 10));
                } else {
                    getDefaultRecommendations();
                }
            } catch (error) {
                getDefaultRecommendations();
            }
        }

        // æ˜¾ç¤ºæ¨èéŸ³ä¹
        function displayRecommendations(songs) {
            const recDiv = document.getElementById('recommendations');
            
            let html = '';
            
            songs.forEach((song, index) => {
                const cover = song.picUrl || (song.song && song.song.al && song.song.al.picUrl) || '';
                const songName = song.name || (song.song && song.song.name) || 'æœªçŸ¥æ­Œæ›²';
                const artist = song.song && song.song.ar ? song.song.ar.map(a => a.name).join(', ') : 'æœªçŸ¥æ­Œæ‰‹';
                const songId = song.id || (song.song && song.song.id);
                
                html += `
                    <div class="song-item" onclick="playRecommendation(${songId})">
                        <div class="song-cover">
                            ${cover ? `<img src="${cover}?param=50y50" alt="${songName}" onerror="this.style.display='none'; this.parentElement.innerHTML='<i class=\"fas fa-music\" style=\"color: var(--text-muted); font-size: 1.2rem;\"></i>'">` : 
                                      `<i class="fas fa-music" style="color: var(--text-muted); font-size: 1.2rem;"></i>`}
                        </div>
                        <div class="song-info">
                            <div class="song-title">${songName}</div>
                            <div class="song-artist">${artist}</div>
                        </div>
                    </div>
                `;
            });
            
            recDiv.innerHTML = html;
        }

        // é»˜è®¤æ¨èåˆ—è¡¨
        function getDefaultRecommendations() {
            const recDiv = document.getElementById('recommendations');
            
            const defaultSongs = [
                { id: 33894312, name: "èµ·é£äº†", artist: "ä¹°è¾£æ¤’ä¹Ÿç”¨åˆ¸" },
                { id: 1330348068, name: "æ²ˆå›­å¤–", artist: "é˜¿YueYue,æˆ¾æ ¼,å°ç”°éŸ³ä¹ç¤¾" },
                { id: 1441758494, name: "å¦‚æ„¿", artist: "ç‹è²" },
                { id: 1901371647, name: "é›ª Distance", artist: "Capper,ç½—è¨€RollFlash" },
                { id: 1974443814, name: "æˆ‘ä¼šç­‰", artist: "æ‰¿æ¡“" },
                { id: 202373, name: "æ™´å¤©", artist: "å‘¨æ°ä¼¦" },
                { id: 65528, name: "æ±Ÿå—", artist: "æ—ä¿Šæ°" },
                { id: 108478, name: "æ³¡æ²«", artist: "G.E.M.é‚“ç´«æ£‹" }
            ];
            
            let html = '';
            
            defaultSongs.forEach((song) => {
                html += `
                    <div class="song-item" onclick="playSongById(${song.id})">
                        <div class="song-cover">
                            <i class="fas fa-music" style="color: var(--text-muted); font-size: 1.2rem;"></i>
                        </div>
                        <div class="song-info">
                            <div class="song-title">${song.name}</div>
                            <div class="song-artist">${song.artist}</div>
                        </div>
                    </div>
                `;
            });
            
            recDiv.innerHTML = html;
        }

        // é€šè¿‡IDæ’­æ”¾æ­Œæ›²
        async function playSongById(songId) {
            try {
                // è·å–æ­Œæ›²è¯¦æƒ…
                const songUrl = buildApiUrl('/song/detail', { ids: songId });
                const songResponse = await fetch(songUrl);
                const songData = await songResponse.json();
                
                if (songData.code === 200 && songData.songs[0]) {
                    const song = songData.songs[0];
                    
                    // æ›´æ–°æ’­æ”¾å™¨æ˜¾ç¤º
                    document.getElementById('trackTitle').textContent = song.name;
                    document.getElementById('trackArtist').textContent = song.ar ? song.ar.map(artist => artist.name).join(', ') : 'æœªçŸ¥';
                    document.getElementById('trackAlbum').textContent = 'ä¸“è¾‘ï¼š' + (song.al ? song.al.name : 'æœªçŸ¥');
                    document.getElementById('trackDuration').textContent = 'æ—¶é•¿ï¼š' + formatTime(song.dt);
                    
                    // æ›´æ–°ä¸“è¾‘å°é¢
                    const albumArt = document.getElementById('albumArt');
                    if (song.al && song.al.picUrl) {
                        albumArt.className = 'album-art';
                        albumArt.innerHTML = `<img src="${song.al.picUrl}?param=200y200" alt="${song.name}" onerror="this.style.display='none'; this.parentElement.innerHTML='<i class=\"fas fa-music\" style=\"color: var(--primary-color); font-size: 3.5rem;\"></i>'">`;
                    } else {
                        albumArt.className = 'album-art default';
                        albumArt.innerHTML = '<i class="fas fa-music"></i>';
                    }
                    
                    // è·å–æ’­æ”¾é“¾æ¥
                    const params = {
                        id: songId,
                        level: userCookie ? 'exhigh' : 'standard'
                    };
                    
                    if (userCookie) params.cookie = userCookie;
                    
                    const url = buildApiUrl('/song/url/v1', params);
                    const response = await fetch(url);
                    const data = await response.json();
                    
                    if (data.code === 200 && data.data && data.data[0].url) {
                        const audioData = data.data[0];
                        document.getElementById('trackQuality').textContent = 'éŸ³è´¨ï¼š' + getQualityText(audioData.level);
                        
                        // æ’­æ”¾
                        currentAudio.src = audioData.url;
                        currentAudio.play().then(() => {
                            isPlaying = true;
                            document.getElementById('playIcon').className = 'fas fa-pause';
                        });
                    }
                }
            } catch (error) {
                alert('æ’­æ”¾å¤±è´¥ï¼š' + error.message);
            }
        }

        // æ’­æ”¾æ¨èæ­Œæ›²
        function playRecommendation(songId) {
            playSongById(songId);
        }

        // æ’­æ”¾/æš‚åœ
        function togglePlay() {
            if (!currentAudio.src) {
                const firstSong = document.querySelector('#recommendations .song-item');
                if (firstSong) {
                    const songId = firstSong.getAttribute('onclick').match(/\d+/)[0];
                    playSongById(songId);
                }
                return;
            }
            
            if (isPlaying) {
                currentAudio.pause();
                document.getElementById('playIcon').className = 'fas fa-play';
            } else {
                currentAudio.play().then(() => {
                    document.getElementById('playIcon').className = 'fas fa-pause';
                });
            }
            isPlaying = !isPlaying;
        }

        // æ’­æ”¾ä¸Šä¸€é¦–
        function playPrev() {
            if (currentPlaylist.length === 0) return;
            
            currentTrackIndex--;
            if (currentTrackIndex < 0) {
                currentTrackIndex = currentPlaylist.length - 1;
            }
            
            const song = currentPlaylist[currentTrackIndex];
            if (song && song.id) {
                playSongById(song.id);
            }
        }

        // æ’­æ”¾ä¸‹ä¸€é¦–
        function playNext() {
            if (currentPlaylist.length === 0) return;
            
            currentTrackIndex++;
            if (currentTrackIndex >= currentPlaylist.length) {
                currentTrackIndex = 0;
            }
            
            const song = currentPlaylist[currentTrackIndex];
            if (song && song.id) {
                playSongById(song.id);
            }
        }

        // åˆ‡æ¢å–œæ¬¢çŠ¶æ€
        function toggleLike() {
            const likeBtn = document.getElementById('likeBtn');
            if (likeBtn.querySelector('.fas.fa-heart')) {
                likeBtn.innerHTML = '<i class="far fa-heart"></i>';
            } else {
                likeBtn.innerHTML = '<i class="fas fa-heart" style="color: var(--primary-color);"></i>';
            }
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            if (!currentAudio.duration) return;
            
            const progressPercent = (currentAudio.currentTime / currentAudio.duration) * 100;
            document.getElementById('progress').style.width = progressPercent + '%';
            document.getElementById('currentTime').textContent = formatTime(currentAudio.currentTime);
        }

        // å·¥å…·å‡½æ•°
        function buildApiUrl(endpoint, params = {}) {
            const baseParams = {
                timestamp: Date.now()
            };
            
            const allParams = { ...baseParams, ...params };
            const queryString = new URLSearchParams(allParams).toString();
            
            return `${API_BASE}${endpoint}?${queryString}`;
        }

        function formatTime(milliseconds) {
            const seconds = Math.floor(milliseconds / 1000);
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function getQualityText(level) {
            const qualityMap = {
                'standard': 'æ ‡å‡†',
                'higher': 'è¾ƒé«˜',
                'exhigh': 'æé«˜',
                'lossless': 'æ— æŸ',
                'hires': 'Hi-Res'
            };
            return qualityMap[level] || level;
        }

        // ç™»å½•ç›¸å…³åŠŸèƒ½
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
        }

        function hideLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
        }

        async function startQRLogin() {
            hideLoginModal();
            alert('äºŒç»´ç ç™»å½•åŠŸèƒ½éœ€è¦è¿æ¥ç½‘æ˜“äº‘å®˜æ–¹APIï¼Œè¯·åœ¨å®é™…éƒ¨ç½²æ—¶å¯ç”¨');
        }

        // æ›´æ–°ç™»å½•çŠ¶æ€
        function updateLoginStatus() {
            const savedCookie = localStorage.getItem('netease_cookie');
            if (savedCookie) {
                userCookie = savedCookie;
                document.getElementById('loginStatus').textContent = 'å·²ç™»å½•';
                document.getElementById('loginStatus').style.color = '#28a745';
                document.getElementById('qualityStatus').textContent = 'é«˜è´¨é‡éŸ³è´¨';
                document.getElementById('qualityStatus').style.color = '#28a745';
            } else {
                userCookie = null;
                document.getElementById('loginStatus').textContent = 'æœªç™»å½•';
                document.getElementById('loginStatus').style.color = '#dc3545';
                document.getElementById('qualityStatus').textContent = 'æ ‡å‡†éŸ³è´¨';
                document.getElementById('qualityStatus').style.color = '#ffc107';
            }
        }

        async function checkLoginStatus() {
            if (!userCookie) {
                alert('å½“å‰æœªç™»å½•');
                return;
            }
            alert('ç™»å½•çŠ¶æ€æ­£å¸¸');
        }

        // æ£€æŸ¥APIçŠ¶æ€
        async function checkAPIStatus() {
            try {
                const url = buildApiUrl('/login/status');
                await fetch(url);
                document.getElementById('apiStatus').textContent = 'æ­£å¸¸';
                document.getElementById('apiStatus').style.color = '#28a745';
            } catch (error) {
                document.getElementById('apiStatus').textContent = 'å¼‚å¸¸';
                document.getElementById('apiStatus').style.color = '#dc3545';
            }
        }

        // å…¶ä»–åŠŸèƒ½
        function getPersonalized() {
            if (!userCookie) {
                alert('ä¸ªæ€§åŒ–æ¨èéœ€è¦ç™»å½•åä½¿ç”¨');
                showLoginModal();
                return;
            }
            alert('ä¸ªæ€§åŒ–æ¨èåŠŸèƒ½éœ€è¦ç™»å½•åä½¿ç”¨');
        }

        function getTopList() {
            alert('æ’è¡Œæ¦œåŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
        }
    </script>
</body>
</html>
